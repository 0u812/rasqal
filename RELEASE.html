<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
  <title>Rasqal RDF Query Library - Release Notes</title>
</head>
<body>

  <h1>Rasqal RDF Query Library - Release Notes</h1>

<h2 id="rel0_9_4"><a name="rel0_9_4">Rasqal 0.9.4 Changes</a></h2>

<p>
FIXME DRAFT
</p>

<p>Pass on raptor parser errors to rasqal's error routines and
upwards.</p>

<p>Clean up more allocated memory when a query fails to prepare or
execute.</p>

<p>Fixed lexer jam when query had a bad variable name.</p>

<p>Fixed crash if query ended in a regex.</p>

<p>Tidied up testing framework so 'make distcheck' works.</p>


<h2 id="rel0_9_3"><a name="rel0_9_3">Rasqal 0.9.3 Changes</a></h2>

<p>Rasqal's License was changed from LGPL 2.1/MPL 1.1 to
LGPL 2.1/Apache 2</p>

<p>Added support for the
<a href="http://www.w3.org/TR/2004/WD-rdf-sparql-query-20041012/">
SPARQL Query Language for RDF</a>,
W3C Working Draft, 12 October 2004
from the W3C RDF Data Access Working Group (DAWG).
The support is at the basic syntax level - token lexer and grammar parser
which passes the first simple tests from the proposed
DAWG testcases.  No additional query engine support has been added for SPARQL
features that are not supported by RDQL.  The
<a href="http://librdf.org/rasqal/TODO.html#sparql">Rasqal to do list</a>
contains full details of the implementation state.
</p>

<p>Queries can now be prepared and then executed multiple times.</p>

<p>Added configure <code>--enable-query-languages</code> option with
<code>rdql</code> and <code>sparql</code> as the choices.</p>

<p>Thanks to Chris Pointon for several patches to make Rasqal easier
to build under Win32.  Applied with some modifications.  Renamed the
RDQL and SPARQL syntax tokens ERROR to ERROR_TOKEN to help.</p>

<p>Added experimental support for querying multiple sources; the same
query is executed over each source in turn.  Also added some support
for returning the source URI which is not yet enabled as this feature
is in flux in the DAWG work.  This may change or be removed in future
versions.</p>

<p><code>roqet</code> can specify a data source URI on the command
line with <code>-s</code> / <code>--source</code>) <em>URI</em> for
queries executing against an implicit model.</p>

<p>Added the
<a href="http://www.w3.org/2001/sw/DataAccess/tests/">DAWG SPARQL test cases</a>
driven from the manifest.n3 format.  Created tests from the examples
in the working draft.</p>

<p>Added an experimental XML result format for bindings, based on
DAWG work.  Enabled in <code>roqet</code> with <code>-o xml</code>.
This is very likely to change or replaced in future versions.</p>

<p>Added <code>roqet</code> argument <code>-d</code> /
<code>--dump-query</code> to dump the processed query, rather than
do it by default (0.9.2 and earlier).</p>

<p><code>roqet</code> can now read queries from URIs, using
the <code>raptor_www</code> class to do the retrieval.</p>

<p>Fixed the <code>configure</code> checks for a posix regex
function regcomp to correctly discover it is present.</p>


<h3>Internal changes</h3>

<p>Added support for declaring prefixes for XML-style QNames both
before and after their use.</p>

<p>The struct <code>rasqal_prefix</code> gained a
<code>declared</code> field.</p>

<p>The struct <code>rasqal_triple</code> gained an origin field; not
used at present but intended to support work on tracking triple
provenance such as provided by Redland Contexts.</p>

<p>Added methods <code>rasqal_triple_set_origin</code> and
<code>rasqal_triple_get_origin</code> to support the above.</p>

<p>struct <code>rasqal_triple_meta</code> now takes a 4-array of
bindings, the fourth being the origin.</p>

<p>Exported function <code>rasqal_set_triples_source_factory</code>
publically as originally intended.
</p>


<h2 id="rel0_9_2"><a name="rel0_9_2">Rasqal 0.9.2 Changes</a></h2>

<p>This release made minor portability fixes for building with
C++ and Win32 (untested).</p>

<p>Several functions changed their parameters or return values from
char* to unsigned char* or const unsigned char* to reflect the
actual use.</p>

<p>Changed to return a <code>const unsigned char*</code>:<br />
<code>rasqal_literal_as_string</code>
</p>

<p>Changed to take <code>const unsigned char*</code> (or add
<code>const</code>):<br />
<code>rasqal_new_floating_literal</code><br />
<code>rasqal_new_pattern_literal</code><br />
<code>rasqal_new_prefix</code><br />
<code>rasqal_new_simple_literal</code><br />
<code>rasqal_new_string_literal</code><br />
<code>rasqal_new_variable</code><br />
<code>rasqal_query_has_variable</code><br />
<code>rasqal_query_results_get_binding_name</code><br />
<code>rasqal_query_results_get_binding_value_by_name</code><br />
<code>rasqal_query_results_get_bindings</code><br />
<code>rasqal_query_set_variable</code><br />
</p>


<h2 id="rel0_9_1"><a name="rel0_9_1">Rasqal 0.9.1 Changes</a></h2>

<p>This release changed the way that results were returned.  A new
<code>rasqal_query_results</code> class was created.  This allows for
a clean separation of the two concepts allowing multiple form of the
results to be retrieved as methods of the query_results class, rather
than the query class.  The only form of results currently available
is variable bindings, but RDF graphs will be returned in future,
as a set of triples in a serialised form.</p>

<p>The execution method <code>rasqal_query_execute</code> was changed
to return a new object of that class rather than an <code>int</code>
success or failure.</p>

<p>The following methods of the <code>rasqal_query</code> class
were renamed and moved to the new <code>rasqal_query_results</code>
class:</p>

<table>
<tr>
<th>0.9.0 name</th> <th>0.9.1+ name</th>
</tr>
<tr>
<td><code>rasqal_query_get_result_count</code></td> <td><code>rasqal_query_results_get_count</code></td>
</tr>
<tr>
<td><code>rasqal_query_next_result</code></td> <td><code>rasqal_query_results_next</code></td>
</tr>
<tr>
<td><code>rasqal_query_results_finished</code></td> <td><code>rasqal_query_results_finished</code></td>
</tr>
<tr>
<td><code>rasqal_query_get_result_bindings</code></td> <td><code>rasqal_query_results_get_bindings</code></td>
</tr>
<tr>
<td><code>rasqal_query_get_result_binding_value</code></td> <td><code>rasqal_query_results_get_binding_value</code></td>
</tr>
<tr>
<td><code>rasqal_query_get_result_binding_name</code></td> <td><code>rasqal_query_results_get_binding_name</code></td>
</tr>
<tr>
<td><code>rasqal_query_get_result_binding_by_name</code></td> <td><code>rasqal_query_results_get_binding_value_by_name</code></td>
</tr>
<tr>
<td><code>rasqal_query_get_bindings_count</code></td> <td><code>rasqal_query_results_get_bindings_count</code></td>
</tr>
</table>

<p>A new <code>rasqal_free_query_results</code> destructor was created
to delete the query results.  (There is no public constructor).</p>

<p>Other minor bugs were fixed such as multiple constraints now being
ANDed and not ORed, and adding defensive code for when queries fail
and results methods are invoked.</p>


<h2 id="rel0_9_0"><a name="rel0_9_0">Rasqal 0.9.0 Changes</a></h2>

<p>
It is all new.
</p>



<hr />

<p>Copyright 2004 <a href="http://purl.org/net/dajobe/">Dave Beckett</a>, <a href="http://www.ilrt.bris.ac.uk/">Institute for Learning and Research Technology</a>, <a href="http://www.bristol.ac.uk/">University of Bristol</a></p>

</body>
</html>
